<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>HSB color picker</title>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5MWTZP7X');</script>
  <!-- End Google Tag Manager -->
  <link href="stylesheet.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <meta name="google-site-verification" content="w8-xmQPiNml6wX8KEUQK5zcPiJTd_Se9lxgEO3TYl-I" />
  <meta name="msvalidate.01" content="0EB9A25C7D25DF6A660CC5A07C55BF0D" />
</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5MWTZP7X"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <div id="app" class="container">
    <h1>HSB colorpicker</h1>
    <div class="result" v-bind:style="{background: resultColor}"></div>
    <div class="colorcode">
      <input v-model.lazy="colorcode" type="text" style="ime-mode:disabled;">
      <button @click="copy">Copy</button>
    </div>

    <div class="slider-container">
      <h2>Hue</h2>
      <input v-model.lazy.number="hue" type="range" min="0" max="360" step="1" id="hue" @change="HSBtoCode">
      <input v-model.lazy.number="hue" type="number" min="0" max="360" step="1" @change="HSBtoCode">
    </div>
    <div class="slider-container">
      <h2>Saturation</h2>
      <input v-model.lazy.number="saturation" type="range" min="0" max="255" step="1" id="saturation"
        @change="HSBtoCode">
      <input v-model.lazy.number="saturation" type="number" min="0" max="255" step="1" @change="HSBtoCode">
    </div>
    <div class="slider-container">
      <h2>Brightness</h2>
      <input v-model.lazy.number="brightness" type="range" min="0" max="255" step="1" id="brightness"
        @change="HSBtoCode">
      <input v-model.lazy.number="brightness" type="number" min="0" max="255" step="1" @change="HSBtoCode">
    </div>


  </div>



  <script>
    var app = new Vue({
      el: '#app',
      data: {
        message: 'Hello Vue!',
        colorcode: 'FFFFFF',
        hue: 0,
        saturation: 0,
        brightness: 0,
        resultColor: '#6784ac', //未対応
        red: 0,
        green: 0,
        blue: 0
      },
      methods: {
        copy: function (event) {
          // メソッド内の `this` は、 Vue インスタンスを参照します
          if (navigator.clipboard) {
            navigator.clipboard.writeText(this.colorcode);
            alert('Copied ' + this.colorcode + '!')
          }
        },
        HSBtoCode: function (event) {
          //HSB to RGB change
          max = this.brightness;
          min = max - ((this.saturation / 255) * max);
          if (this.hue <= 60) {
            red = max;
            green = (this.hue / 60) * (max - min) + min;
            blue = min;
          } else if (this.hue <= 120) {
            red = ((120 - this.hue) / 60) * (max - min) + min;
            green = max;
            blue = min;
          } else if (this.hue <= 180) {
            red = min;
            green = max;
            blue = ((this.hue - 120) / 60) * (max - min) + min;
          } else if (this.hue <= 240) {
            red = min;
            green = ((240 - this.hue) / 60) * (max - min) + min;
            blue = max;
          } else if (this.hue <= 300) {
            red = ((this.hue - 240) / 60) * (max - min) + min;
            green = min;
            blue = max;
          } else {
            red = max;
            green = min;
            blue = ((360 - this.hue) / 60) * (max - min) + min;
          };
          console.log("R:" + red);
          console.log("G:" + green);
          console.log("B:" + blue);

          //RGB to Code change
          redCode = Math.round(red).toString(16);
          greenCode = Math.round(green).toString(16);
          blueCode = Math.round(blue).toString(16);
          this.colorcode = redCode + greenCode + blueCode;
          console.log(redCode);
          console.log(this.colorcode);
          this.resultColor = "#" + this.colorcode;
        },
        HSBtoRGB: function (event) {
          //HSB to RGB change
          max = this.brightness;
          min = max - ((this.saturation / 255) * max);
          if (this.hue <= 60) {
            red = max;
            green = (this.hue / 60) * (max - min) + min;
            blue = min;
          } else if (this.hue <= 120) {
            red = ((120 - this.hue) / 60) * (max - min) + min;
            green = max;
            blue = min;
          } else if (this.hue <= 180) {
            red = min;
            green = max;
            blue = ((this.hue - 120) / 60) * (max - min) + min;
          } else if (this.hue <= 240) {
            red = min;
            green = ((240 - this.hue) / 60) * (max - min) + min;
            blue = max;
          } else if (this.hue <= 300) {
            red = ((this.hue - 240) / 60) * (max - min) + min;
            green = min;
            blue = max;
          } else {
            red = max;
            green = min;
            blue = ((360 - this.hue) / 60) * (max - min) + min;
          }
        },
        RGBtoCode: function (event) {
          redCode = red.toString(16);
          greenCode = green.toString(16);
          blueCode = blue.toString(16);
          this.colorcode = redCode + greenCode + blueCode;
          console.log(this.colorcode);
        }
      }
    })


  </script>

  <script type="text/javascript">
      (function (c, l, a, r, i, t, y) {
        c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
        t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
        y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
      })(window, document, "clarity", "script", "hnmzt3kpbo");
  </script>


</body>

</html>
